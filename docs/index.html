<html>
    <head>
        <title>Non-linear least squares</title>
        <link rel="stylesheet" type="text/css" href="./main.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
        <meta charset="utf-8" content=" text/html" http-equiv="content-type" />
    </head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
    <body>
        <div id="container">
            <div id="mainAreaContainer">
                <div id="controlsColumn">
                    <div class="tab-control" id="fitting-type">
                        <div class="horizontal-tab-header-panel">
                            <div class="top-tab-button active" data-role="tab" data-tab="curve-fitting" data-parent="fitting-type">Curve fitting</div>
                            <div class="top-tab-button" data-role="tab" data-tab="fourier-series" data-parent="fitting-type">Fourier series</div>
                        </div>
                        <div class="tab-content-panel">
                            <div class="tab-item-panel show" data-role="tab-item" id="curve-fitting" data-parent="fitting-type">
                                <div class="form">
                                    <div class="form-row">
                                        <label class="form-col">Plot resolution</label>
                                        <input type="number" id="curve-plot-resolution" class="input form-col" value="100" min="2" max="10000">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-col">Approximating function</label>
                                    </div>
                                    <div class="form-row">
                                        <textarea id="curve-function-area" class="input" placeholder="Example: a{10}*x+b{20}+c*sin(x)">a1{1}*erf((x+a3{-21})*a2{1})+a4{0.5}</textarea>
                                    </div>
                                    <div class="form-row">
                                        <button id="curve-fit" class="button form-col">Fit</button>
                                    </div>
                                    <div class="tab-control" id="methods">
                                        <div class="vertical-tab-header-panel">
                                            <div class="top-tab-button active" data-role="tab" data-tab="gradient-descent" data-parent="methods">Gradient descent method</div>
                                            <div class="top-tab-button" data-role="tab" data-tab="newton" data-parent="methods">Newton's method</div>
                                            <div class="top-tab-button" data-role="tab" data-tab="gauss-newton" data-parent="methods">Gauss-Newton method</div>
                                            <div class="top-tab-button" data-role="tab" data-tab="particle-swarm" data-parent="methods">Particle swarm method</div>
                                        </div>
                                        <div class="tab-content-panel">
                                            <div class="tab-item-panel show" data-role="tab-item" id="gradient-descent" data-parent="methods">
                                                <div class="form-row">
                                                    <label class="form-col">Use</label>
                                                    <input type="checkbox" id="gradient-descent-use" class="input form-col" checked>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Iterations</label>
                                                    <input type="number" id="gradient-descent-iterations" class="input form-col" value="75" min="1" max="500" step="1">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Rate</label>
                                                    <input type="number" id="gradient-descent-rate" class="input form-col" value="0.05" min="0" max="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Error Abs. Tol.</label>
                                                    <input type="number" id="gradient-descent-err-abs-tol"  class="input form-col" value="0" min="0" step="0.1">
                                                </div>
                                            </div>
                                            <div class="tab-item-panel" data-role="tab-item" id="newton" data-parent="methods">
                                                <div class="form-row">
                                                    <label class="form-col">Use</label>
                                                    <input type="checkbox" id="newton-use" class="input form-col" checked>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Iterations</label>
                                                    <input type="number" id="newton-iterations" class="input form-col" value="50" min="1" max="500" step="1">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Alpha</label>
                                                    <input type="number" id="newton-alpha" class="input form-col" value="0.9" min="0" max="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Error Abs. Tol.</label>
                                                    <input type="number" id="newton-err-abs-tol"  class="input form-col" value="0" min="0" step="0.1">
                                                </div>
                                            </div>
                                            <div class="tab-item-panel" data-role="tab-item" id="gauss-newton" data-parent="methods">
                                                <div class="form-row">
                                                    <label class="form-col">Use</label>
                                                    <input type="checkbox" id="gauss-newton-use" class="input form-col" checked>
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Iterations</label>
                                                    <input type="number" id="gauss-newton-iterations"  class="input form-col" value="50" min="1" max="500" step="1">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Alpha</label>
                                                    <input type="number" id="gauss-newton-alpha"  class="input form-col" value="0.95" min="0" max="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Error Abs. Tol.</label>
                                                    <input type="number" id="gauss-newton-err-abs-tol"  class="input form-col" value="0" min="0" step="0.1">
                                                </div>
                                            </div>
                                            <div class="tab-item-panel" data-role="tab-item" id="particle-swarm" data-parent="methods">
                                                <div class="form-row">
                                                    <label class="form-col">Use</label>
                                                    <input type="checkbox" id="particle-swarm-use" class="input form-col">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Iterations</label>
                                                    <input type="number" id="particle-swarm-iterations" class="input form-col" value="30" min="1" max="500" step="1">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Particles</label>
                                                    <input type="number" id="particle-swarm-particles" class="input form-col" value="15" min="1" max="100" step="1">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">W</label>
                                                    <input type="number" id="particle-swarm-w" class="input form-col" value="0" min="0.3" max="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">&phi; p</label>
                                                    <input type="number" id="particle-swarm-phi-p" class="input form-col" value="0" min="0.3" max="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">&phi; g</label>
                                                    <input type="number" id="particle-swarm-phi-g" class="input form-col" value="0" min="0.3" max="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Max initial value</label>
                                                    <input type="number" id="particle-swarm-max" class="input form-col" value="1" step="0.05">
                                                </div>
                                                <div class="form-row">
                                                    <label class="form-col">Min initial value</label>
                                                    <input type="number" id="particle-swarm-min" class="input form-col" value="-1" step="0.05">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-item-panel" data-role="tab-item" id="fourier-series" data-parent="fitting-type">
                                <div class="form">
                                    <div class="form-row">
                                        <label class="form-col">Plot resolution</label>
                                        <input type="number" id="fourier-plot-resolution" class="input form-col" value="100" min="2" max="10000">
                                    </div>
                                    <div class="form-row">
                                        <label class="form-col">Number of harmonics</button>
                                        <input class="input form-col" type="number" id="fourier-harmonics" value="6" min="1">
                                    </div>
                                    <div class="form-row">
                                        <button id="fourier-fit" class="button form-col">Fit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form">
                        <div class="form-row">
                            <label class="form-col">Expression</label>
                        </div>
                        <div class="form-row">
                            <input id="expression" type="text" class="input form-col" placeholder="Example: 2*(x+4)+5*sin(x-3)" value="x*x+sin(pi()*x)">
                        </div>
                        <div class="form-row">
                            <button id="plot-exp" class="button form-col">Plot expression</button>
                        </div>
                        <div class="form-row">
                            <button id="generate-values" class="button form-col">Generate table values from expression</button>
                        </div>
                        <div class="form-row">
                            <label class="form-col">Resolution</label>
                            <input type="number" id="resolution" value="100" min="2" max="1000" class="input form-col">
                        </div>
                        <div class="form-row">
                            <label class="form-col">Min</label>
                            <input type="number" id="max" value="-1" step="0.1" class="input form-col">
                        </div>
                        <div class="form-row">
                            <label class="form-col">Max</label>
                            <input type="number" id="min" value="1" step="0.1" class="input form-col">
                        </div>
                        <div class="form-row">
                            <label class="form-col">Amplitude of additive noise</label>
                            <input id="noise-amp" type="number" value="0" step="0.1" min="0" class="input form-col">
                        </div>
                        <label class="form-row">Table values</label>
                        <div class="form-row">
                            <textarea id="table-area" class="input" placeholder="x0,y0,x1,y1,...">
0, 0.021592459,
1, 0.020293111,
2, 0.021807906,
3, 0.023803297,
4, 0.025208132,
5, 0.025414957,
6, 0.024621282,
7, 0.020973705,
8, 0.015752802,
9, 0.01116804,
10, 0.008578277,
11, 0.006581877,
12, 0.005171723,
13, 0.004545205,
14, 0.00414512,
15, 0.004343112,
16, 0.005238155,
17, 0.007251939,
18, 0.012543656,
19, 0.028067132,
20, 0.091342277,
21, 0.484081092,
22, 0.870378324,
23, 0.939513128,
24, 0.960926994,
25, 0.968623763,
26, 0.971263883,
27, 0.972285819,
28, 0.971898742,
29, 0.972691859,
30, 0.971734812,
31, 0.97234454,
32, 0.97150339,
33, 0.970857997,
34, 0.970553866,
35, 0.969671404</textarea>
                        </div>
                        <div class="form-row">
                            <button id="plot-table" class="button form-col">Plot values</button>
                        </div>
                    </div>
                </div>
                <div id="resultsColumn">
                    <div id="plot">
                    </div>
                    <textarea id="log" disabled>
                    </textarea>
                </div>
            </div>
            <div id="statusBar">
                <div id="status">Ready</div><div class="vr"></div><progress id="progress-bar" value="1" min="0" max="1"></progress>
            </div>
        </div>
        <script defer src="./bundle.js">
        </script>
        <script>
            /*$('*[data-role="tab"]').click(
                function(e)
                {
                    let target = $(e.target);
                    let parentId = target.data("parent");
                    let parent=$('#'+parentId);
                    let tabId = target.data("tab");
                    $('[data-role="tab-item"][data-parent="'+parentId+'"').removeClass("show");
                    $('[data-role="tab"][data-parent="'+parentId+'"').removeClass("active");
                    target.addClass("active");
                    $('#'+tabId).addClass("show");
                }
            );*/
        </script>
    </body>
</html>